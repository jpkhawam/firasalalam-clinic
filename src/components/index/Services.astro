---
import { t } from "i18next";
import { Picture } from "@astrojs/image/components";

const cards = [1, 2, 3];

function getButton(link: string, text: string) {
  return (
    "<span>" +
    `<a href=${link} class="group relative inline-block dark:hidden">` +
    '<span class="absolute inset-0 translate-x-1.5 translate-y-1.5 bg-gray-600 transition-transform group-hover:translate-x-0 group-hover:translate-y-0"></span>' +
    '<span class="relative inline-block border-2 border-gray-600 px-8 py-3 text-sm font-bold uppercase tracking-widest text-white group-active:text-opacity-75">' +
    `${text}` +
    "</span>" +
    "</a>" +
    `<a href=${link} class="group relative hidden rounded dark:inline-block">` +
    '<span class="absolute inset-0 translate-x-1 translate-y-0.5 rounded-full bg-brand transition-transform"></span>' +
    '<span class="relative inline-block rounded-full border-2 border-brand bg-base-200 px-8 py-3 text-center text-sm font-bold uppercase tracking-widest text-brand group-hover:translate-x-1 group-hover:translate-y-0.5 group-active:text-opacity-75">' +
    `${text}` +
    "</span>" +
    "</a>" +
    "</span>"
  );
}
---

<div class="mt-10 justify-items-center py-10 dark:bg-[#1B1E26]">
  <h2 class="pb-1 text-center text-3xl font-black md:text-4xl">
    {t("index.Services.title")}
  </h2>
  <div>
    <svg
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      class="w-full fill-none dark:fill-brand"
      aria-hidden="true"
      focusable="false"
      ><path
        d="M29.9998 0C33.1927 0 34.8781 1.35127 36.1572 2.37671L36.1968 2.40847C37.4129 3.38321 38.2258 4.00761 39.9999 4.00761C41.774 4.00761 42.5869 3.38321 43.803 2.40847L43.8427 2.37671C45.1217 1.35127 46.8071 0 50 0V2.99235C48.2259 2.99235 47.413 3.61675 46.1969 4.5915L46.1573 4.62325C44.8782 5.64869 43.1928 6.99997 39.9999 6.99997C36.807 6.99997 35.1216 5.64869 33.8426 4.62325L33.8029 4.5915C32.5869 3.61684 31.7741 2.99247 30.0003 2.99235C28.2262 2.99235 27.4133 3.61679 26.1972 4.59153L26.1575 4.62329C24.8785 5.64873 23.1931 7 20.0002 7C16.8073 7 15.1219 5.64873 13.8428 4.62329L13.8032 4.59153C12.5871 3.61679 11.7742 2.99239 10.0001 2.99239C8.22599 2.99239 7.41309 3.61679 6.19696 4.59153L6.15735 4.62329C4.87831 5.64873 3.19287 7 0 7V4.00765C1.77411 4.00765 2.58701 3.38325 3.80314 2.4085L3.84275 2.37675C5.12179 1.35131 6.80723 3.47204e-05 10.0001 3.47204e-05C13.193 3.47204e-05 14.8784 1.35131 16.1574 2.37675L16.1971 2.4085C17.4132 3.38325 18.2261 4.00765 20.0002 4.00765C21.7743 4.00765 22.5872 3.38325 23.8033 2.4085L23.8429 2.37675L23.843 2.3767C25.122 1.35132 26.8073 0.000138115 29.9998 0Z"
      ></path></svg
    >
  </div>
  <div
    class="mx-5 ml-auto mr-auto grid grid-cols-1 justify-items-center gap-x-[100px] gap-y-10 px-5 py-10 dark:bg-[#1B1E26] lg:grid-cols-3 lg:px-20 2xl:px-52"
  >
    {
      cards.map((i) => (
        <div class="group relative">
          <div
            class=" absolute inset-0 translate-x-2 translate-y-2 bg-gray-500 opacity-25 transition-transform duration-700 group-hover:scale-105 dark:hidden"
            aria-hidden="true"
          />
          <div class="relative">
            <div
              class="group flex h-[500px] w-full cursor-pointer flex-col overflow-hidden bg-gray-600 text-white transition-transform duration-700 hover:scale-105 dark:bg-brand lg:h-[575px] lg:w-[320px] xl:h-[575px] xl:w-[395px]"
              onclick={`service_card_modal_${i}.showModal()`}
            >
              <div class="mb-5">
                <h2 class="mb-3 me-6 ms-8 mt-8 text-start font-sans font-semibold [font-size:1.65rem] [line-height:2.2rem] dark:text-black">
                  {t(`index.Services.card-${i}.text`)}
                </h2>
                <span class="ms-8 text-start font-sans font-semibold underline [font-size:1.00rem] dark:text-black">
                  {t("index.Services.learn-more")}
                </span>
              </div>
              <Picture
                src="/svg/undraw_designer.svg"
                class="mx-auto hidden max-w-sm transition-transform duration-1000 group-hover:scale-110 dark:rounded-lg dark:bg-[#f4f4f4] lg:inline-block"
                widths={[400, 800, 1200]}
                aspectRatio="1:1"
                alt="TODO:"
              />
            </div>
          </div>
        </div>
      ))
    }
  </div>
</div>

<dialog id="service_card_modal_1" class="modal">
  <form
    method="dialog"
    class="modal-box h-screen max-h-screen w-screen rounded-none bg-cream text-gray-700 dark:bg-base-200 dark:text-white sm:h-[90vh] sm:w-11/12 sm:max-w-[70vw] sm:rounded-2xl"
  >
    <button
      class="btn-ghost btn-sm btn-circle btn absolute right-4 top-3 mb-10 text-2xl"
    >
      ✕
    </button>
    <h3 class="mt-14 text-center text-3xl font-black tracking-wide">
      Press ESC key or click outside to close
    </h3>
    <p class="mx-auto my-5 max-w-prose text-center text-lg">
      {"Press ESC key or click outside to close ".repeat(5)}
    </p>
    <p class="mx-auto my-5 max-w-prose text-center text-lg">
      {"Press ESC key or click outside to close ".repeat(5)}
    </p>
    <div
      class="mt-10 flex justify-center"
      set:html={getButton("/TODO:", "Go to page now")}
    />
  </form>
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>

<dialog id="service_card_modal_2" class="modal">
  <form
    method="dialog"
    class="modal-box h-screen max-h-screen w-screen rounded-none bg-cream text-gray-700 dark:bg-base-200 dark:text-white sm:h-[90vh] sm:w-11/12 sm:max-w-[70vw] sm:rounded-2xl"
  >
    <button
      class="btn-ghost btn-sm btn-circle btn absolute right-4 top-3 mb-10 text-2xl"
    >
      ✕
    </button>
    <h3 class="mt-14 text-center text-3xl font-black tracking-wide">
      Press ESC key or click outside to close
    </h3>
    <p class="mx-auto my-5 max-w-prose text-center text-lg">
      {"Press ESC key or click outside to close ".repeat(5)}
    </p>
    <p class="mx-auto my-5 max-w-prose text-center text-lg">
      {"Press ESC key or click outside to close ".repeat(5)}
    </p>
    <div
      class="mt-10 flex justify-center"
      set:html={getButton("/TODO:", "Go to page now")}
    />
  </form>
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>

<dialog id="service_card_modal_3" class="modal">
  <form
    method="dialog"
    class="modal-box h-screen max-h-screen w-screen rounded-none bg-cream text-gray-700 dark:bg-base-200 dark:text-white sm:h-[90vh] sm:w-11/12 sm:max-w-[70vw] sm:rounded-2xl"
  >
    <button
      class="btn-ghost btn-sm btn-circle btn absolute right-4 top-3 mb-10 text-2xl"
    >
      ✕
    </button>
    <h3 class="mt-14 text-center text-3xl font-black tracking-wide">
      Press ESC key or click outside to close
    </h3>
    <p class="mx-auto my-5 max-w-prose text-center text-lg">
      {"Press ESC key or click outside to close ".repeat(5)}
    </p>
    <p class="mx-auto my-5 max-w-prose text-center text-lg">
      {"Press ESC key or click outside to close ".repeat(5)}
    </p>
    <div
      class="mt-10 flex justify-center"
      set:html={getButton("/TODO:", "Go to page now")}
    />
  </form>
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>
